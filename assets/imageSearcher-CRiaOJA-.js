import{i as j,S as R}from"./vendor-B2mb6eXk.js";const q=document.querySelector(".gallery"),T=document.querySelector(".search-form"),r=document.querySelector(".loader"),N=document.querySelector("input[name='searchQuery']"),m=document.querySelector(".lmbtn");let S=null,k="",s=1,D=0;const $=3;T.addEventListener("submit",t=>{t.preventDefault();const e=N.value;H(e)});window.rejectAlert=function(t){j.show({message:t,position:"topRight",messageColor:"#ffffff",backgroundColor:"#d15858"})};const B=async(t,e)=>{console.log("Fetching:",{query:t,page:e});const c=`https://pixabay.com/api/?key=50495832-52e00f4195b6d2cb1ef4fba52&q=${encodeURIComponent(t)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${e}`,l=await fetch(c);if(!l.ok)throw new Error("Network response was not ok");return await l.json()},H=async t=>{q.innerHTML="",m.classList.add("visualy-hidden"),s=1;const e=t.trim();if(k=e,e==="")return rejectAlert("Sorry, there are no images matching your search query. Please try again!");r.style.display="block";try{const n=await B(k,s),a=n.hits;if(D=n.totalHits,r.style.display="none",a.length===0)return rejectAlert("Sorry, there are no images matching your search query. Please try again!");I(a),m.classList.remove("visualy-hidden"),s+=1}catch(n){return r.style.display="none",console.error(n),rejectAlert("Something went wrong. Please try again later.")}},M=async()=>{if(console.log(s),s>=$){m.classList.add("visualy-hidden"),rejectAlert("We're sorry, but you've reached the end of search results.");return}const t=document.querySelector(".gallery-item");if(t){const{height:e}=t.getBoundingClientRect();window.scrollBy({top:e*2,behavior:"instant"})}r.style.display="block";try{const n=(await B(k,s)).hits;r.style.display="none",I(n),s+=1;const a=document.querySelector(".gallery-item");if(a){const{height:c}=a.getBoundingClientRect();window.scrollBy({top:c*2,behavior:"smooth"})}}catch(e){r.style.display="none",console.error(e),rejectAlert("Something went wrong. Please try again later.")}};m.addEventListener("click",M);const U=t=>{const{webformatURL:e,largeImageURL:n,tags:a,likes:c,views:l,comments:A,downloads:P}=t,u=document.createElement("li");u.classList.add("gallery-item");const i=document.createElement("a");i.classList.add("gallery-link"),i.href=n;const d=document.createElement("img");d.classList.add("gallery-image"),d.src=e,d.alt=a.split(",")[0];const o=document.createElement("div");o.classList.add("imageStats");const p=document.createElement("div");p.classList.add("stat-box");const y=document.createElement("span");y.classList.add("stat-name"),y.textContent="Likes";const g=document.createElement("span");g.classList.add("stat-amount"),g.textContent=c;const h=document.createElement("div");h.classList.add("stat-box");const w=document.createElement("span");w.classList.add("stat-name"),w.textContent="Views";const f=document.createElement("span");f.classList.add("stat-amount"),f.textContent=l;const L=document.createElement("div");L.classList.add("stat-box");const b=document.createElement("span");b.classList.add("stat-name"),b.textContent="Comments";const v=document.createElement("span");v.classList.add("stat-amount"),v.textContent=A;const x=document.createElement("div");x.classList.add("stat-box");const E=document.createElement("span");E.classList.add("stat-name"),E.textContent="Downloads";const C=document.createElement("span");return C.classList.add("stat-amount"),C.textContent=P,p.append(y,g),o.appendChild(p),h.append(w,f),o.appendChild(h),L.append(b,v),o.appendChild(L),x.append(E,C),o.appendChild(x),i.appendChild(d),u.append(i,o),u},I=t=>{const e=t.map(U);q.append(...e),S?S.refresh():S=new R(".gallery a",{captionsData:"alt",captionDelay:250})};
//# sourceMappingURL=imageSearcher-CRiaOJA-.js.map
